<!--{php168}-->
<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<p></p>

<div id="p8_46_$data[id]" style="overflow: hidden; width: $data[width]px; height: 0px; margin: auto; display: none;position:absolute;top:0;left:0;right:0;z-index:99999;" align="center">
	<!--{foreach $list $value}-->
	<a href="$value[url]" target="_blank"><img src="$value[media]" width="$data[width]" height="$data[height]" title="{$data['data']['name']}" /></a>
	<!--{/foreach}-->
	<span id="close" style="top:2px;right:2px;cursor:pointer;position: absolute;width: 18px; height: 18px; background: url($RESOURCE/images/close.gif) no-repeat 0 -18px;"></span>
</div>

<script type="text/javascript">
(function(){

var cookies = document.cookie.split('; ');
for(var i = 0; i < cookies.length; i++){
	var tmp = cookies[i].split('=');
	//not expired
	//if(tmp[0] == 'p8_46_shwon_$data[id]' && parseInt(tmp[1]) == $timestamp) return;
}

function setcookie( name, value, expires, path, domain, secure ) {
	var today = new Date();
	
	today.setTime( today.getTime() );
	if ( expires ) {
		expires = expires * 1000;
	}
	var expires_date = new Date( today.getTime() + expires );
	var str = name +'='+ escape( value ) +
		(expires ? ';expires='+ expires_date.toGMTString() : '' ) + 
		(path ? ';path=' + path : '' ) +
		(domain ? ';domain=' + domain : '' ) +
		(secure ? ';secure' : '' );
	document.cookie = str;
}

setcookie('p8_46_shwon_$data[id]', $timestamp, 8640000);


var div = document.getElementById('p8_46_$data[id]'), height = $data[height], interval;
var close = document.getElementById('close');

function slide(type, step, callback){
	var _height = parseInt(div.style.height.replace(/[^0-9\-]/g, ''));
	step += 10;
	var val = (type == 'show' ? _height + step : _height - step);
	if(type == 'show' && val >= height){
		div.style.height = height +'px';
		
		if(callback) callback();
		return;
	}else if(type == 'hide' && val <= 0){
		div.style.height = '0px';
		div.style.display = 'none';
		
		if(callback) callback();
		return;
	}
	
	div.style.height = val +'px';
	
	interval = setTimeout(function(){ slide(type, step, callback); }, 150);
}

//document.body.insertBefore(div, document.body.firstChild);
div.style.display = '';

var timeout = setTimeout(function(){ slide('hide', 20); }, 20000);

slide('show', 20, function(){
	div.onmouseover = function(){
		clearTimeout(timeout);
	};
	
	div.onmouseout = function(){
		timeout = setTimeout(function(){ slide('hide', 20); }, 1500);
	};
});
close.onclick=function(){
	div.style.display='none';
}
})();
</script>

</body>
</html>
<!--{/php168}-->