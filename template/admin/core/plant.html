<!--{php168}-->
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>大数据运维总览图</title>
    <script type="text/javascript" src="{$RESOURCE}/js/plant/jquery.js"></script>
    <link rel="stylesheet" href="{$RESOURCE}/skin/admin/plant/style.css">
</head>
<script type="text/javascript">
	$(document).ready(function(){
		var html=$(".wrap ul").html()
		$(".wrap ul").append(html)
		var ls=$(".wrap li").length/2+1
		i=0
		ref = setInterval(function(){
			i++
			if(i==ls){
				i=1
				$(".wrap ul").css({marginTop:0})
				$(".wrap ul").animate({marginTop:-'.52'*i+'rem'},1000)
			}
	    	$(".wrap ul").animate({marginTop:-'.52'*i+'rem'},1000)

		},2400);

		var infohtml2=$(".infohtml ul").html()
		$(".infohtml ul").append(infohtml2)
		var ls2=$(".infohtml li").length/2+1
		a=0
		ref = setInterval(function(){
			a++
			if(a==ls2){
				a=1
				$(".infohtml ul").css({marginTop:0})
				$(".infohtml ul").animate({marginTop:-'.5'*a+'rem'},800)
			}
	    	$(".infohtml ul").animate({marginTop:-'.5'*a+'rem'},800)
		},4300);
		
		var html2=$(".adduser ul").html()
		$(".adduser ul").append(html2)
		var ls2=$(".adduser li").length/2+1
		b=0
		ref = setInterval(function(){
			b++
			if(b==ls2){
				b=1
				$(".adduser ul").css({marginTop:0})
				$(".adduser ul").animate({marginTop:-'.5'*b+'rem'},800)
			}
	    	$(".adduser ul").animate({marginTop:-'.5'*b+'rem'},800)
		},4300);
	})
</script>
<body>
    <div class="loading">
        <div class="loadbox"> <img src="{$RESOURCE}/skin/admin/plant/loading.gif"> 页面加载中... </div>
    </div>
    <div class="head">
        <h1><img src="{$RESOURCE}/skin/admin/plant/logo.png">大数据运维总览图</h1>
        <div class="weather"><span>今天是：</span><span>{$today}</span></div>
    </div>
    <div class="mainbox">
        <ul class="clearfix">
            <li>
                <div class="boxall" style="height: 2.7rem">
                    <div class="alltitle">主站数据概览</div>
                    <div class="sycm">
                        <ul class="clearfix">
                            <li><h2 class="counter">{$countCmsAll['count']}</h2><span>主站数据量</span></li>
                            <li><h2>{$countCmsToday['count']}</h2><span>今天新增量</span></li>
                            <li><h2>{$countCmsMonth['count']}</h2><span>本月新增量</span></li>
                        </ul>
                        <div style="border-bottom: 1px solid rgba(255,255,255,.1)"></div>
                        <ul class="clearfix">                            
                            <li><h2>{$countPushToday['count']}</h2><span>今日数据推送量</span></li>
                            <li><h2>{$countPushMonth['count']}</h2><span>本月数据推送量</span></li>
							<li><h2>{$countCmsUnverified['count']}</h2><span>待审内容数</span></li>
                        </ul>
                    </div>
                    <div class="boxfoot"></div>
                </div>
				<!--{if isset($systems['sites']) && $systems['sites']['enabled']}-->
				<div class="boxall" style="height: 2.7rem">
                    <div class="alltitle">站群数据概览</div>
                    <div class="sycm">
                        <ul class="clearfix">
                            <li><h2 class="counter">{$countSitesAll['count']}</h2><span>站群数据量</span></li>
                            <li><h2>{$countSitesToday['count']}</h2><span>今天新增量</span></li>
                            <li><h2>{$countSitesMonth['count']}</h2><span>本月新增量</span></li>
                        </ul>
                        <div style="border-bottom: 1px solid rgba(255,255,255,.1)"></div>
                        <ul class="clearfix">
                            <li><h2>{$countSitesSite['count']}</h2><span>分站总数量</span></li>
                            <li><h2>{$countSitesStatusSite['count']}</h2><span>启用的分站数</span></li>
							<li><h2>{$countSitesUnverified['count']}</h2><span>待审内容数</span></li>                            
                        </ul>
                    </div>
                    <div class="boxfoot"></div>
                </div>
				<!--{/if}-->
				<div class="boxall" style="height:6.2rem">
                    <div class="alltitle">运行系统环境参数</div>                                      
                    <div class="infohtml" style="height:2.5rem">
						<ul class="clearfix">
							<li class="clearfix"> <span class="pulll_left">操作系统</span> <span class="pulll_right"><!--{php echo PHP_OS;}--></span> </li>
							<li class="clearfix"> <span class="pulll_left">当前域名</span> <span class="pulll_right">{if $_SERVER['SERVER_PORT']=='80'}$_SERVER[SERVER_NAME]{else}$_SERVER[SERVER_NAME]:$_SERVER[SERVER_PORT]{/if}</span> </li>
							<li class="clearfix"> <span class="pulll_left">服务器端信息</span> <span class="pulll_right">$_SERVER[SERVER_SOFTWARE]</span> </li>
							<li class="clearfix"> <span class="pulll_left">程序版本</span> <span class="pulll_right">PHP <!--{php echo PHP_VERSION;}--> / MySQL <!--{php echo $db_version;}--></span> </li>
							<li class="clearfix"> <span class="pulll_left">磁盘容量(可用/剩余)</span> <span class="pulll_right">{$disk_total}/{$disk_free}</span> </li>
							<li class="clearfix"> <span class="pulll_left">最大上传限制</span> <span class="pulll_right"><!--{php echo ini_get('upload_max_filesize');}--></span> </li>
							<li class="clearfix"> <span class="pulll_left">最大执行时间</span> <span class="pulll_right"><!--{php echo ini_get('max_execution_time');}-->秒</span> </li>
							<li class="clearfix"> <span class="pulll_left">图像GD支持</span> <span class="pulll_right"><!--{if function_exists('imagecreate')}-->是<!--{else}-->否<!--{/if}--></span> </li>
							<li class="clearfix"> <span class="pulll_left">服务器解译引擎</span> <span class="pulll_right">{$_SERVER['SERVER_SOFTWARE']}</span> </li>
						</ul>
                    </div>
					<div class="tit02"><span>磁盘容量使用率%</span></div>
                    <div id="echarts4" style="height: 2.7rem; width: 100%;"></div>
                    <div class="boxfoot"></div>
                </div>
            </li>
            <li>
                <div class="bar">
                    <div class="barbox">
                        <ul class="clearfix">
                            <li class="pulll_left counter">{$countCmsAll['count']}</li>
							<li class="pulll_left counter">{$sumCmsAll['count']}</li>
                            <li class="pulll_left counter">{if $countSitesAll['count']}{$countSitesAll['count']}{else}{$countCmsMonth['count']}{/if}</li>
                        </ul>
                    </div>
                    <div class="barbox2">
                        <ul class="clearfix">
                            <li class="pulll_left">主站数据量</li>
							<li class="pulll_left">阅读量</li>
                            <li class="pulll_left">{if $countSitesAll['count']}站群数据量{else}本月发布量{/if}</li>
                        </ul>
                    </div>
                </div>
                <div class="map">
                    <div class="map1"><img src="{$RESOURCE}/skin/admin/plant/lbx.png"></div>
                    <div class="map2"><img src="{$RESOURCE}/skin/admin/plant/jt.png"></div>
                    <div class="map3"><img src="{$RESOURCE}/skin/admin/plant/map.png"></div>
                    <div class="map4" id="map_1"></div>
                </div>
				 <div class="boxall" style="height:3.35rem">
					<div class="tit02"><span>内容分发栏目概况</span></div>
					<div id="echarts10" style="height:2.75rem;"></div>
					<div class="boxfoot"></div>
				</div>
            </li>
            <li>
                <div class="boxall" style="height:2.7rem">
                    <div class="alltitle">会员概览</div>                   
                    <div class="clearfix">
                        <div class="sy" id="echarts6"></div>
                        <div class="sy" id="echarts7"></div>
                        <div class="sy" id="echarts8"></div>
                    </div>
					<div class="boxfoot"></div>
				</div>
				<div class="boxall" style="height:6.2rem">
                    <div class="addnew3">
                        <div class="tit02"><span>会员角色分布</span></div>
                        <div class="adduser2">
                             <div id="echarts9" style="height:2.8rem;"></div>
                        </div>
                    </div>
					<div class="addnew">
                        <div class="tit02"><span>最近登录的用户</span></div>
                        <div class="adduser">
                            <ul class="clearfix">
								<!--{foreach $lastLogin $val}-->
                                <li class="clearfix"> <span class="pulll_left"><img src="{$RESOURCE}/skin/admin/plant/{if $val['gender']}b{else}g{/if}.jpg">{$val['username']}{if $val['name']} | {$val['name']}{/if}</span> <span class="pulll_right">{$val['last_login_ip']} - {date('m/d',$val['last_login'])}</span> </li>
								<!--{/foreach}-->
                            </ul>
                        </div>
                    </div>
                    <div class="boxfoot"></div>
                </div>
                <div class="boxall" style="height: 3.4rem">
                    <div class="alltitle">最新内容</div>
                    <div class="wrap">
                        <ul>
                            <!--{foreach $listdb $val}-->
							<li>
                                <p><a href="$val[url]" target="_blank">&nbsp;{$val['title']}</a></p>
                            </li>
                            <!--{/foreach}-->
                        </ul>
                    </div>
                    <div class="boxfoot"></div>
                </div>
            </li>
        </ul>
 
    </div>
    <div class="back"></div>
    <script language="JavaScript" src="{$RESOURCE}/js/plant/js.js"></script>
    <script type="text/javascript" src="{$RESOURCE}/js/plant/echarts.min.js"></script>
    <script type="text/javascript" src="{$RESOURCE}/js/plant/china.js"></script>
    <script type="text/javascript" src="{$RESOURCE}/js/plant/area_echarts.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {           
            myChart6.resize();
            myChart7.resize();
            myChart8.resize();
			myChart9.resize();
			myChart10.resize();
        })
        window.addEventListener("resize", function () {           
            myChart6.resize();
            myChart7.resize();
            myChart8.resize();
			myChart9.resize();
			myChart10.resize();
        });
    </script>
    <script type="text/javascript">
		var countMember = {$countMember['count']};
		var login_time = {$sumMember['login_time']};
		var new_messages = {$sumMember['new_messages']};
        var myChart6 = echarts.init(document.getElementById('echarts6'));
        option6 = {
            series: [{
                type: 'pie',
                radius: ['70%', '80%'],
                color: '#0088cc',
                label: {
                    normal: {
                        position: 'center'
                    }
                },
                data: [{
                    value: countMember,
                    name: '会员总量',
                    label: {
                        normal: {
                            formatter: countMember + '',
                            textStyle: {
                                fontSize: 20,
                                color: '#fff',
                            }
                        }
                    }
                }]
            }]

        };

        var myChart7 = echarts.init(document.getElementById('echarts7'));
        option7 = {
            series: [{
                type: 'pie',
                radius: ['70%', '80%'],
                color: '#fccb00',
                label: {
                    normal: {
                        position: 'center'
                    }
                },
                data: [{
                    value: login_time,
                    name: '会员登录次数',
                    label: {
                        normal: {
                            formatter: login_time + '',
                            textStyle: {
                                fontSize: 20,
                                color: '#fff',
                            }
                        }
                    }
                }]
            }]
        };


        var myChart8 = echarts.init(document.getElementById('echarts8'));
        option8 = {
            series: [{
                type: 'pie',
                radius: ['70%', '80%'],
                color: '#62b62f',
                label: {
                    normal: {
                        position: 'center'
                    }
                },
                data: [{
                    value: new_messages,
                    name: '会员短消息数',
                    label: {
                        normal: {
                            formatter: new_messages + '',
                            textStyle: {
                                fontSize: 20,
                                color: '#fff',
                            }
                        }
                    }
                }]
            }]
        };
        setTimeout(function () {
            myChart6.setOption(option6);
            myChart7.setOption(option7);
            myChart8.setOption(option8);
        }, 500);

    </script>
    <script type="text/javascript">
        var myChart = echarts.init(document.getElementById('echarts4'));
        option = {
			tooltip: {
				formatter: '{b} : {c}%'
			},
			series: [{
				name: '使用率',
				type: 'gauge',
				progress: {
					show: true
				},
				detail: {
					valueAnimation: true,
					formatter: '{value}'
				},
				data: [{
					value: {$user_percentage},
					name: '使用率'
				}]
			}]
		};
        myChart.setOption(option);
        $(document).ready(function () {
            myChart.resize();

        })
        window.addEventListener("resize", function () {
            myChart.resize();
        });
    </script>
	<script>
		var myChart9 = echarts.init(document.getElementById('echarts9'));
		var role_json = {$role_json};
		option = {
			tooltip: {
				trigger: 'item'
			},
			color:['#5470c6','#91cc75','#fac858','#ff0033','#73c0de','#3ba272','#fc8452','#9a60b4','#ea7ccc'],
			series: [{
				data: role_json,				
				type: 'pie',
				radius: ['38%', '70%'],
				avoidLabelOverlap: true,
				label: {
					show: true,					
				},
				emphasis: {
					label: {
						show: true,
						fontSize: '12',
						fontWeight: 'bold'
					}
				},
				labelLine: {
					show: true
				},
			}]
		};

		var myChart10 = echarts.init(document.getElementById('echarts10'));
		var item_count_json = {$item_count_json};
		option10 = {			
			tooltip: {
		        trigger: 'axis',
		        axisPointer: {
		            type: 'shadow'
		        }
		    },
		    grid: {
		        left: '3%',
		        right: '4%',
		        bottom: '3%',
		        containLabel: true
		    },
			xAxis: {
				type: 'category',
				data: item_count_json.name,
			},
			yAxis: {
				show: false,
			},
			series: [{
				data: item_count_json.data,
				type: 'bar',
				label:{
					show:true,
					position:'insideBottom',
				},
			}]
		};	
        setTimeout(function () {
            myChart9.setOption(option);
			myChart10.setOption(option10);
        }, 500);
	</script>
    <script type="text/javascript" src="{$RESOURCE}/js/plant/jquery.waypoints.min.js"></script>
    <script type="text/javascript" src="{$RESOURCE}/js/plant/jquery.countup.min.js"></script>
    <script type="text/javascript">
        $('.counter').countUp();
    </script>

</body>
</html>
<!--{/php168}-->