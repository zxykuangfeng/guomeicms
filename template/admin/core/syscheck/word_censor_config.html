<!--{php168}-->
<!--{template $core header admin}-->
<div class="mainbox mainborder">
	<div class="section">
		<table class="formtable">
			<tr>
				<td class="headerbtn_list">
					<ul>
						<li><a href="{$core.admin_controller}/core-filter_link"><i class="fa fa-shield"></i>{$P8LANG[filter_link]}</a></li>					
						<li><a href="{$core.admin_controller}/core-word_scan"><i class="fa fa-shield"></i>{$P8LANG[word_scan]}</a></li>
						<li><a href="{$core.admin_controller}/core-word_censor_config"><i class="fa fa-shield"></i>{$P8LANG[word_censor]}</a></li>		
						<li><a href="{$core.admin_controller}/core-word_filter"><i class="fa fa-shield"></i>{$P8LANG[word_filter]}</a></li>
						<li><a href="{$core.admin_controller}/cms/item-set_lan"><i class="fa fa-shield"></i>{$P8LANG[set_lan]}</a></li>
					</ul>
				</td>
			</tr>
		</table>
	</div>
</div>
<div class="mainbox mainborder">
	<div class="section ">
		<form action="$this_url" method="post">
			<table width="100%" border="0"  class="mainbox">
				<tr>
					<td>
						<ul class="boxmenu">
							<li class="btn-color1"><a href="{$core.admin_controller}/core-word_censor"><i class="icon icon-ico22"></i>大数据内容扫描体检</a></li>
							<li class="btn-color2"><a href="{$core.admin_controller}/core-word_censor_config"><i class="icon icon-ico10"></i>大数据内容扫描体检设置</a></li>
						</ul>
					</td>
				</tr>
			</table>
		
			<table class="columntable formtable hover_table">
				<tr class="title fix_head">
					<td colspan="2" class="title">大数据内容扫描检测设置</td>
				</tr>
				<tr>
					<td class="tdL">{$P8LANG['content_censor_default']}</td>
					<td class="tdR">
						<input type="radio" name="config[content_censor_default]" value="1"{if !empty($config['content_censor_default'])} checked{/if} />{$P8LANG['Y']}
						<input type="radio" name="config[content_censor_default]" value="0"{if empty($config['content_censor_default'])} checked{/if} />{$P8LANG['N']}						
						<span>{$P8LANG['content_censor_default_note']}</span> 
					</td>
				</tr>
				<tr>
					<td class="tdL">{$P8LANG['content_censor_enabled']}</td>
					<td class="tdR">
						<input type="radio" name="config[content_censor_enabled]" value="1"{if !empty($config['content_censor_enabled'])} checked{/if} onclick="$('#content_censor').show()" />{$P8LANG['enabled']}
						<input type="radio" name="config[content_censor_enabled]" value="0"{if empty($config['content_censor_enabled'])} checked{/if} onclick="$('#content_censor').hide()" />{$P8LANG['disabled']}
						<span class="help">{$P8LANG['content_censor_note']}</span>  <a href="https://console.bce.baidu.com/ai/?_=1622346072834#/ai/antiporn/overview/resource/getFree" target="_blank" style="color:blue;text-decoration:underline;">免费资源领取</a> 总量5万次赠送 + 超出按量计费
					</td>
				</tr>
				<tbody id="content_censor" style="display:{if empty($config['content_censor_enabled'])}none{/if}">
				<tr>
					<td class="tdL">{$P8LANG['content_censor_appid']}</td>
					<td class="tdR"><input type="text" class="txt" name="config[content_censor_appid]" size="45" value="{$config['content_censor_appid']}" /> <a href="https://console.bce.baidu.com/ai/?_=1626257172966#/ai/antiporn/app/list" target="_blank">查看百度应用AppID</a></td>
				</tr>
				<tr>
					<td class="tdL">{$P8LANG['content_censor_secretid']}</td>
					<td class="tdR"><input type="text" class="txt" name="config[content_censor_secretid]" size="45" value="{$config['content_censor_secretid']}" />  <a href="https://console.bce.baidu.com/ai/?_=1626257172966#/ai/antiporn/app/list" target="_blank">查看百度应用API Key</a></td>
				</tr>
				<tr>
					<td class="tdL">{$P8LANG['content_censor_secretkey']}</td>
					<td class="tdR"><input type="text" class="txt" name="config[content_censor_secretkey]" size="45" value="{$config['content_censor_secretkey']}" />  <a href="https://console.bce.baidu.com/ai/?_=1626257172966#/ai/antiporn/app/list" target="_blank">查看百度应用Secret Key</a></td>
				</tr>
				</tbody>
				<tr>
					<td colspan="2">
						<div style="text-align:center;">
							<input type="hidden" name="type" value="config" />
							<input name="" type="submit" value="{$P8LANG[config]}" class="submit_btn" />
						</div>
					</td>
				</tr>
			</table>			
		</form>
	</div>
</div>

<div class="mainbox mainborder">
	<div class="section">
		<table class="columntable formtable hover_table">
			<tr class="title fix_head">
				<td colspan="5" class="title">自定义敏感词白名单搜索</td>
			</tr>
			
			<tr>
				<td colspan="5">
				<form action="$this_url" method="get">
					<input type="text" class="txt" size = "38" name="word" value="{if !empty($keyword)}$keyword{/if}" />
					<input type="submit" value="搜索" class="submit_btn"/>
				</form>				
				</td>
			</tr>
		</table>
	</div>
</div>

<div class="mainbox mainborder">
	<div class="section">
		<form action="$this_url" method="post" id="form">
			<table class="columntable formtable hover_table click_changeable">
				<tr class="title fix_head">
					<td class="title" width="5%"><input type="checkbox" onclick="check_all(this,'id[]');init_tr($('#form'));" /></td>
					<td class="title">自定义敏感词白名单</td>
				</tr>
				
				<!--{foreach $filter_words $v}-->
				<tr id="word_$v[id]">
					<td><input type="checkbox" name="id[]" value="$v[id]" /></td>
					<td>
						<input type="text" class="new_name" name="$v[id]" value="$v[filter_word]" />
					</td>
				</tr>
				<!--{/foreach}-->
				
				<tr id="clone">
					<td></td>
					<td>
						<input type="text" name="word[]" value="" />
					</td>
				</tr>
				
				<tr id="add">
					<td></td>
					<td>
						<input type="button" value="{$P8LANG['add']}" class="submit_btn" onclick="add()" />
					</td>
				</tr>
				
				<tr>
					<td colspan="5" align="center">
						<input type="submit" value="{$P8LANG['submit']}" class="submit_btn"/>
						<input type="button" value="删除选中" onclick="deleteAll();" class="submit_btn"/>
						<input type="button" value="导出词库" onclick="window.location='$this_url?type=export'" class="submit_btn"/>
						<input type="button" value="导入词库" onclick="window.location='$this_url?type=import'" class="submit_btn"/>
					</td>
				</tr>
			</table>
			<div id="new_word"></div>
		</form>
		<div id="page" class="pages">$pages</div>
	</div>
</div>
<div class="mainbox mainborder">
	<div class="section">
		<table class="columntable formtable">
			<tr class="title fix_head">
				<td class="title">{$P8LANG['help_about']}</td>
			</tr>
			<tr>
				<td class="headerbtn_list">					
					建议在百度官方的智能云审核中设置关键字白或黑名单
					</td>
			</tr>
			
		</table>
	</div>
</div>
<script type="text/javascript">	
function add(){
	var copy = $('#clone').clone(true).show();
	
	copy.insertBefore($('#add')).find('input').val('');
}

function _delete(array){
	var id = [];
	$.each(array, function(k, v){
		id.push(v.replace(/[^0-9]/g, ''));
	});
	
	if(!id.length) return false;
	
	//if(confirm('{$P8LANG['confirm_to_delete']}')){
	p8_window.confirm('{$P8LANG['confirm_to_delete']}', function (r) {
		if(r){
			$.ajax({
				url: '$this_url',
				type: 'POST',
				dataType: 'json',
				data: ajax_parameters({type: 'del', id: id}),
				cache: false,
				beforeSend: function(){
					ajaxing({});
				},
				success: function(json){
					ajaxing({action: 'hide'});
					
					for(var i in json){
						$('#word_'+ json[i]).remove();
					}
				}
			});
		}
	});
}

function deleteAll(){
	var inputs = $("input[name='id[]']:checked");
	var ids = new Array();
	for(var i=0;i<inputs.length;i++){
		ids[i]=$(inputs[i]).attr("value");
	}
	_delete(ids);
}

$('#form input.new_name').change(function(){
	$(this).css({border: '1px solid #ff0000'});
	
	$('#new_word').append($('<input type="hidden" name="new_name['+ $(this).attr('name') +']" value="'+ $(this).val() +'" />'));
});
</script>
<!--{template $core footer admin}-->
<!--{/php168}-->